{"version":3,"sources":["webpack:////Users/zhangzhan/Desktop/xiaochengxu/sanrenpin/三人拼团/components/posters-layer/index.vue?d83b","webpack:////Users/zhangzhan/Desktop/xiaochengxu/sanrenpin/三人拼团/components/posters-layer/index.vue?5e75","webpack:////Users/zhangzhan/Desktop/xiaochengxu/sanrenpin/三人拼团/components/posters-layer/index.vue?0449","webpack:////Users/zhangzhan/Desktop/xiaochengxu/sanrenpin/三人拼团/components/posters-layer/index.vue?4265","webpack:////Users/zhangzhan/Desktop/xiaochengxu/sanrenpin/三人拼团/components/posters-layer/index.vue","webpack:////Users/zhangzhan/Desktop/xiaochengxu/sanrenpin/三人拼团/components/posters-layer/index.vue?b7bc"],"names":["CACHE_KEYS","data","width","height","views","props","postersData","type","Object","default","watch","newVal","oldVal","createPosters","mounted","uni","removeStorageSync","cache","getStorageSync","ctx","createCanvasContext","methods","paintingData","clearActions","isPainting","readyPigment","err","$emit","background","radius","inter","setInterval","clearInterval","closePath","beginPath","drawRect","top","left","getImageList","downLoadImages","imageList","i","length","push","url","index","tempFileList","getImageInfo","then","imgInfo","startPainting","tailorImageDraw","view","px","wMultiple","originWidth","hMultiple","originHeight","sizeNormal","multiple","tempW","tempH","sx","sy","ex","ey","ow","oh","tailor","imageIndex","_img","_views","drawData","localPath","drawImage","measureText","showModal","title","content","drawText","drawRound","draw","setStorageSync","saveImageToLocal","old_drawImage","params","round","drawRoundImage","old_drawRoundImage","x","y","w","h","r","save","arc","Math","PI","setFillStyle","fill","clip","restore","_drawRadiusRect","moveTo","lineTo","old_drawRound","MaxLineNumber","breakWord","color","fontSize","lineHeight","textAlign","bolder","textDecoration","_setStyle","setTextBaseline","setFontSize","setTextAlign","fillText","drawTextLine","fillTop","lineNum","substring","fillRect","Promise","resolve","reject","objExp","RegExp","test","src","complete","res","errMsg","img","path","Error","canvasToTempFilePath","canvasId","success","tempFilePath"],"mappings":"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","file":"components/posters-layer/index.js","sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4fb7f3ff&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('4fb7f3ff', component.options)\n    } else {\n      api.reload('4fb7f3ff', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=4fb7f3ff&\", function () {\n      api.rerender('4fb7f3ff', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/zhangzhan/Desktop/xiaochengxu/sanrenpin/三人拼团/components/posters-layer/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=4fb7f3ff&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nconst CACHE_KEYS = 'temp_canvasdrawer_pic_cache';\nexport default {\n    data() {\n        return {\n            width: 100,\n            height: 100,\n            width: 100,\n            height: 100,\n            paintingData: { views: [] },\n            index: 0,\n            imageList: [],\n            tempFileList: [],\n            isPainting: false,\n            ctx: null,\n            cache: {},\n        }\n    },\n    props: {\n        postersData: {\n            type: Object,\n            default() {\n                return { views: [] };\n            }\n        }\n    },\n    watch: {\n        postersData(newVal, oldVal) {\n            newVal = newVal || { views: [] };\n            this.createPosters(newVal);\n        }\n    },\n    mounted() {\n        uni.removeStorageSync('CACHE_KEYS');\n        this.cache = uni.getStorageSync('CACHE_KEYS') || {};\n        this.ctx = uni.createCanvasContext('canvasdrawer', this);\n        this.createPosters(this.postersData);\n    },\n    methods: {\n        createPosters(newVal) {\n            if (!newVal.width || !newVal.height) {\n                return;\n            };\n            // newVal = newVal || { views: [] };\n            newVal.views = newVal.views || [];\n            uni.removeStorageSync('CACHE_KEYS')\n            this.paintingData = newVal;\n            this.ctx && this.ctx.clearActions();\n            if (!this.isPainting) {\n                if (newVal.width && newVal.height) {\n                    this.isPainting = true;\n                    try {\n                        this.readyPigment();\n                    }\n                    catch(err) {\n                        this.$emit('error');\n                    }\n                }\n            }\n        },\n        readyPigment() {\n            const { width, height, views, background, radius = 0 } = this.paintingData;\n            this.width = width;\n            this.height = height;\n            const inter = setInterval(() => {\n                if (this.ctx) {\n                    clearInterval(inter);\n                    this.ctx.clearActions();\n                    this.ctx.closePath();\n                    // begin another path\n                    this.ctx.beginPath();\n                    this.drawRect({\n                        //  || 'rgba(255, 255, 255, 0)'\n                        background: background,\n                        top: 0,\n                        left: 0,\n                        radius,\n                        width,\n                        height\n                    })\n                    this.getImageList(views);\n                    this.downLoadImages(0);\n                }\n            }, 100);\n        },\n        getImageList(views) {\n            const imageList = [];\n            for (let i = 0; i < views.length; i++) {\n                if (views[i].type === 'image') {\n                    imageList.push(views[i].url);\n                }\n            }\n            this.imageList = imageList;\n        },\n        downLoadImages(index) {\n            const imageList = this.imageList;\n            const tempFileList = this.tempFileList;\n            if (index < imageList.length) {\n                // console.log(imageList[index])\n                this.getImageInfo(imageList[index]).then(imgInfo => {\n                    tempFileList.push(imgInfo)\n                    this.tempFileList = tempFileList;\n                    this.downLoadImages(index + 1);\n                })\n            } else {\n                this.startPainting();\n            }\n        },\n        tailorImageDraw(view, imgInfo) {\n            // _views.tailor == 'center'\n            let px = 1;\n            let wMultiple = (view.width * px) / imgInfo.originWidth;\n            let hMultiple = (view.height * px) / imgInfo.originHeight;\n            let sizeNormal = false;\n            if (wMultiple <= 1 && hMultiple <= 1) {\n                let multiple = wMultiple > hMultiple ? wMultiple : hMultiple;\n                // let tempW = imgInfo.originWidth * multiple;\n                // let tempH = imgInfo.originHeight * multiple;\n                let tempW = (view.width * px) / multiple;\n                let tempH = (view.height * px) / multiple;\n                let sx = (imgInfo.originWidth - tempW) / 2;\n                let sy = (imgInfo.originHeight - tempH) / 2;\n                let ex = sx + tempW;\n                let ey = sy + tempH;\n                view['sx'] = sx || 0;\n                view['sy'] = sy || 0;\n                view['ex'] = ex || 0;\n                view['ey'] = ey || 0;\n                sizeNormal = true;\n            }\n            const data = {\n                ...view,\n                ow: imgInfo.originWidth,\n                oh: imgInfo.originHeight\n            };\n            // console.log(JSON.stringify(data));\n            if (!sizeNormal) {\n                delete data.tailor;\n            }\n            // this.drawImage(data);\n            return data;\n        },\n        async startPainting() {\n            const { tempFileList, paintingData: { views } } = this;\n            for (let i = 0, imageIndex = 0; i < views.length; i++) {\n                if (views[i].type === 'image') {\n                    let _img = tempFileList[imageIndex];\n                    let _views = views[i];\n                    let drawData = {};\n                    if (_views.tailor) {\n                        _views = this.tailorImageDraw(_views, _img);\n                    }\n                    drawData = {\n                        ..._views,\n                        url: _img.localPath\n                    };\n                    this.drawImage(drawData);\n                    // if (_views.radius) {\n                    //     this.drawRoundRect(drawData);\n                    // }\n                    // else {\n                    // }\n                    imageIndex++;\n                } else if (views[i].type === 'text') {\n                    if (!this.ctx.measureText) {\n                        uni.showModal({\n                            title: '提示',\n                            content: '当前微信版本过低，无法使用 measureText 功能，请升级到最新微信版本后重试。'\n                        });\n                    } else {\n                        this.drawText(views[i]);\n                    }\n                } else if (views[i].type === 'rect') {\n                    this.drawRect(views[i]);\n                }\n                else if (views[i].type === 'round') {\n                    this.drawRound(views[i]);\n                }\n            }\n            this.ctx.draw(true, () => {\n                uni.setStorageSync('CACHE_KEYS', this.cache);\n                this.saveImageToLocal();\n            })\n        },\n        old_drawImage(params) {\n            // console.log(params)\n            const {\n                url,\n                top = 0,\n                left = 0,\n                width = 0,\n                height = 0,\n                sx = 0,\n                sy = 0,\n                ex = 0,\n                ey = 0\n            } = params;\n            if ('tailor' in params) {\n                this.ctx.drawImage(url, sx, sy, ex, ey, left, top, width, height);\n            }\n            else if (params.round === true) {\n                this.drawRoundImage(params);\n            }\n            else {\n                this.ctx.drawImage(url, left, top, width, height);\n            }\n        },\n        old_drawRoundImage(params) {\n            let ctx = this.ctx;\n            let x = params.left;\n            let y = params.top;\n            let w = params.width;\n            let h = params.height;\n            let url = params.url;\n            let r = w / 2;\n            ctx.save();\n            ctx.beginPath();\n            ctx.arc(x + r, y + r, r, 0, 2 * Math.PI);\n            ctx.setFillStyle(params.background || '#ffffff');\n            ctx.fill();\n            ctx.clip();\n            // 这个地方想要的是头像，简单点就放了个矩形\n            ctx.drawImage(url, x, y, w, h);\n            ctx.restore();\n        },\n        _drawRadiusRect(params) {\n            const {\n                top = 0,\n                left = 0,\n                width = 0,\n                height = 0,\n                radius = 0,\n             } = params;\n            let x = left;\n            let y = top;\n            let w = width;\n            let h = height;\n            // let bgc = background;\n            let r = radius;\n            // let br = radius;\n            this.ctx.beginPath();\n            this.ctx.moveTo(x + r, y);    // 移动到左上角的点\n            this.ctx.lineTo(x + w - r, y);\n            this.ctx.arc(x + w - r, y + r, r, 2 * Math.PI * (3 / 4), 2 * Math.PI * (4 / 4));\n            this.ctx.lineTo(x + w, y + h - r);\n            this.ctx.arc(x + w - r, y + h - r, r, 0, 2 * Math.PI * (1 / 4));\n            this.ctx.lineTo(x + r, y + h);\n            this.ctx.arc(x + r, y + h - r, r, 2 * Math.PI * (1 / 4), 2 * Math.PI * (2 / 4));\n            this.ctx.lineTo((x), (y + r));\n            this.ctx.arc(x + r, y + r, r, 2 * Math.PI * (2 / 4), 2 * Math.PI * (3 / 4));\n\n            // this.ctx.moveTo(x + r, y);\n            // this.ctx.arcTo(x + w, y, x + w, y + h, r);\n            // this.ctx.arcTo(x + w, y + h, x, y + h, r);\n            // this.ctx.arcTo(x, y + h, x, y, r);\n            // this.ctx.arcTo(x, y, x + w, y, r);\n        },\n        drawImage(params) {\n            const {\n                type = '',\n                background,\n                top = 0,\n                left = 0,\n                width = 0,\n                height = 0,\n                radius = 0,\n                url = '',\n                sx = 0,\n                sy = 0,\n                ex = 0,\n                ey = 0\n            } = params;\n            let x = left;\n            let y = top;\n            let w = width;\n            let h = height;\n            let r = radius;\n            this.ctx.save();\n            if (radius) {\n                this.ctx.beginPath();\n                \n\n                // if (radius === parseInt(width / 2)) {\n                //     console.log('圆');\n                //     this.ctx.beginPath();\n                //     this.ctx.arc(left + radius, top + radius, radius, 0, 2 * Math.PI);\n                //     this.ctx.setFillStyle(params.background || '#ffffff')\n                //     this.ctx.fill()\n                //     this.ctx.clip();\n                //     this.ctx.drawImage(url, x, y, w, h);\n                // }\n                // else {\n                // }\n                this._drawRadiusRect(params);\n                this.ctx.fill();\n                this.ctx.clip();\n            }\n            if ('tailor' in params) {\n                this.ctx.drawImage(url, sx, sy, ex, ey, left, top, width, height);\n            }\n            else {\n                this.ctx.drawImage(url, left, top, width, height);\n            }\n            // this.drawImage(params);\n            \n            this.ctx.restore();\n        },\n        old_drawRound(params) {\n            let ctx = this.ctx;\n            let x = params.left;\n            let y = params.top;\n            let w = params.width;\n            let h = params.height;\n            let r = params.radius;\n            ctx.save();\n            ctx.beginPath();\n            ctx.arc(x + r, y + r, r, 0, 2 * Math.PI);\n            ctx.setFillStyle(params.background || '#ffffff');\n            ctx.fill();\n            ctx.clip();\n            ctx.restore();\n        },\n        drawText(params) {\n            let {\n                MaxLineNumber = 2,\n                breakWord = false,\n                color = 'black',\n                content = '',\n                fontSize = 16,\n                top = 0,\n                left = 0,\n                lineHeight = 20,\n                textAlign = 'left',\n                width,\n                bolder = false,\n                textDecoration = 'none'\n            } = params;\n            if (bolder) {\n                top -= 0.3;\n            }\n            // this.ctx.save();\n            // this.ctx.beginPath();\n            // this.ctx.stroke();\n            let _setStyle = () => {\n                // this.ctx.save();\n                this.ctx.closePath();\n                this.ctx.beginPath();\n                this.ctx.setTextBaseline('top');\n                this.ctx.setFillStyle(color);\n                this.ctx.setFontSize(fontSize);\n                this.ctx.setTextAlign(textAlign);\n            }\n            _setStyle();\n            if (!breakWord) {\n                this.ctx.fillText(content, left, top);\n                this.drawTextLine(left, top, textDecoration, color, fontSize, content);\n            } else {\n                let fillText = '';\n                let fillTop = top;\n                let lineNum = 1;\n                for (let i = 0; i < content.length; i++) {\n                    fillText += [content[i]];\n                    // _setStyle();\n                    if (this.ctx.measureText(fillText).width > width) {\n                        if (lineNum === MaxLineNumber) {\n                            if (i !== content.length) {\n                                fillText = fillText.substring(0, fillText.length - 1) + '...';\n                                // _setStyle();\n                                this.ctx.fillText(fillText, left, fillTop);\n                                this.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\n                                fillText = '';\n                                break;\n                            }\n                        }\n                        // _setStyle();\n                        this.ctx.fillText(fillText, left, fillTop);\n                        this.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\n                        fillText = '';\n                        fillTop += lineHeight;\n                        lineNum++;\n                    }\n                }\n                // _setStyle();\n                this.ctx.fillText(fillText, left, fillTop);\n                this.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\n            }\n            // this.ctx.draw();\n            if (bolder) {\n                this.drawText({\n                    ...params,\n                    left: left - 0.3,\n                    top: top,\n                    bolder: false,\n                    textDecoration: 'none'\n                });\n            }\n        },\n        drawTextLine(left, top, textDecoration, color, fontSize, content) {\n            if (textDecoration === 'underline') {\n                this.drawRect({\n                    background: color,\n                    top: top + fontSize * 1.2,\n                    left: left - 1,\n                    width: this.ctx.measureText(content).width + 2,\n                    height: 1\n                });\n            } else if (textDecoration === 'line-through') {\n                this.drawRect({\n                    background: color,\n                    top: top + fontSize * 0.6,\n                    left: left - 1,\n                    width: this.ctx.measureText(content).width + 2,\n                    height: 1\n                });\n            }\n        },\n        drawRect(params) {\n            // console.log(params)\n            const { background, top = 0, left = 0, width = 0, height = 0 } = params\n            this.ctx.save();\n            this.ctx.setFillStyle(background);\n            if (params.radius) {\n                this._drawRadiusRect(params);\n                this.ctx.fill();\n            }\n            else {\n                this.ctx.setFillStyle(background);\n                this.ctx.fillRect(left, top, width, height);\n            }\n            this.ctx.restore();\n        },\n        getImageInfo(url) {\n            return new Promise((resolve, reject) => {\n                /* 获得要在画布上绘制的图片 */\n                if (this.cache[url]) {\n                    resolve(this.cache[url]);\n                } else {\n                    const objExp = new RegExp(/^http(s)?:\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- .\\/?%&=]*)?/);\n                    if (objExp.test(url)) {\n                        uni.getImageInfo({\n                            src: url,\n                            complete: res => {\n                                if (res.errMsg === 'getImageInfo:ok') {\n                                    const img = {\n                                        url,\n                                        originWidth: res.width,\n                                        originHeight: res.height,\n                                        localPath: res.path\n                                    };\n                                    this.cache[url] = img;\n                                    // console.log(res);\n                                    // resolve(res.path)\n                                    resolve(img);\n                                } else {\n                                    reject(new Error('getImageInfo fail'));\n                                }\n                            }\n                        });\n                    } else {\n                        this.cache[url] = {\n                            url,\n                            originWidth: 0,\n                            originHeight: 0,\n                            localPath: url\n                        };\n                        resolve(url);\n                    }\n                }\n            })\n        },\n        saveImageToLocal() {\n            const { width, height } = this;\n            uni.canvasToTempFilePath({\n                x: 0,\n                y: 0,\n                width,\n                height,\n                canvasId: 'canvasdrawer',\n                success: res => {\n                    if (res.errMsg === 'canvasToTempFilePath:ok') {\n                        this.isPainting = false;\n                        this.imageList = [];\n                        this.tempFileList = [];\n                        this.$emit('success', {\n                            width,\n                            height,\n                            path: res.tempFilePath\n                        });\n                    }\n                }\n            }, this);\n        }\n    }\n}\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}