(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/index"],{"0278":function(t,o,e){"use strict";e.r(o);var s=e("e275"),n=e.n(s);for(var a in s)"default"!==a&&function(t){e.d(o,t,function(){return s[t]})}(a);o["default"]=n.a},4906:function(t,o,e){"use strict";var s=function(){var t=this,o=t.$createElement;t._self._c},n=[];e.d(o,"a",function(){return s}),e.d(o,"b",function(){return n})},"6c53":function(t,o,e){"use strict";e.r(o);var s=e("4906"),n=e("0278");for(var a in n)"default"!==a&&function(t){e.d(o,t,function(){return n[t]})}(a);e("87c9");var i=e("2877"),u=Object(i["a"])(n["default"],s["a"],s["b"],!1,null,null,null);o["default"]=u.exports},7433:function(t,o,e){"use strict";(function(t){e("d81e"),e("921b");s(e("66fd"));var o=s(e("6c53"));function s(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},"87c9":function(t,o,e){"use strict";var s=e("a497"),n=e.n(s);n.a},a497:function(t,o,e){},e275:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,goodsRow:"",options:[],userinfo:"",pintuanHomeData:"",videoStatus:2,videoPath:"",specs1:"",specs2:"",goods_sku_id:0,animagg2:!1,specs_index1:null,specs_index2:null}},computed:{style:function(){var t=this.StatusBar,o=this.CustomBar,e=this.bgImage,s="height:".concat(o,"px;padding-top:").concat(t,"px;");return this.bgImage&&(s="".concat(s,"background-image:url(").concat(e,");")),s}},onLoad:function(o){var e=this;o.goods_id?(e.options=o,e.userinfo=t.getStorageSync("userinfo")?t.getStorageSync("userinfo"):t.getStorageSync("userInfo")?t.getStorageSync("userInfo"):"",this.$http.post("goods/show",{id:o.goods_id}).then(function(t){console.log(t.data),e.goodsRow=t.data,""!=t.data.pintuan_list&&e.setCountDown()}).catch(function(t){console.log("返回错误信息",t)}),console.log("options==",o),e.getPintuanhome()):t.showModal({title:"温馨提示",content:"缺少关键参数",showCancel:!1,success:function(){t.navigateBack({})}})},onShow:function(){this.stoptimedown=1},onReady:function(){},onHide:function(){this.stoptimedown=2},onUnload:function(){this.stoptimedown=2},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){var t=this,o="/pages/index/index?jump=pages/goods/index&jumpData1=goods_id&jumpData2="+t.options.goods_id,e=t.goodsRow.row.goods_name,s=t.goodsRow.row.goods_gallery_images[0];return{title:e,path:o,imageUrl:s}},methods:{judgeGoodsNum:function(){var t=this,o=t.options.goods_id,e=t.specs1,s=t.specs2?t.specs2:0;this.$http.post("judgeGoodsNum",{goods_id:o,specs1:e,specs2:s},{showLoading:!1}).then(function(o){console.log(o.data.id),t.goods_sku_id=o.data.id?o.data.id:0,console.log("goods_sku_id",t.goods_sku_id)})},tishi:function(){var t=this;(""!=t.specs1&&""!=t.specs2||!t.goodsRow.specs.specs1||!t.goodsRow.specs.specs2)&&(!t.goodsRow.specs.specs1||t.goodsRow.specs.specs2||""!=t.specs1)?t.goods_sku_num<=0&&wx.showToast({title:"该规格暂无库存",icon:"none"}):wx.showToast({title:"请选择产品型号",icon:"none"})},changeguige:function(t){var o=this,e=t.currentTarget.dataset.scrollid,s=t.currentTarget.dataset.id,n=(t.currentTarget.dataset.group_id,t.currentTarget.dataset.index);o.specs1=s,o.specs_index1=n,console.log("specs_index1",o.specs_index1),o.scrollkey=e,o.judgeGoodsNum()},changeguige2:function(t){var o=this,e=t.currentTarget.dataset.scrollid,s=t.currentTarget.dataset.id,n=(t.currentTarget.dataset.group_id,t.currentTarget.dataset.index);o.specs2=s,o.specs_index2=n,console.log("specs_index2",o.specs_index2),o.scrollkey=e,o.judgeGoodsNum()},alert_donghua_out:function(t){var o=this,e=wx.createAnimation({duration:0,timingFunction:"linear"});"buy"==t.currentTarget.dataset.types?(e=e.translateY(-560).step(),o.alert_donghua_out2=e,o.animagg2=!0,o.showModalStatus=!0):(e=e.translateY(-600).step(),o.alert_donghua_out=e,o.animagg=!0,o.showModalStatus=!0)},alert_donghua_hide:function(t){var o=this,e=wx.createAnimation({duration:500,timingFunction:"linear"});"buy"==t.currentTarget.dataset.types?(e=e.translateY(560).step(),o.animagg2=!1,o.alert_donghua_out2=e,console.log("隐藏弹窗")):(e=e.translateY(600).step(),o.animagg=!1,o.alert_donghua_out=e)},addformid:function(t){this.addFormID(t.detail.formId)},getShuomingVideo:function(){var t=this;console.log("获取视频说明地址"),""==t.videoPath?(this.$http.post("getVideoPath",{id:t.goodsRow.row.rule_video}).then(function(o){console.log("视频地址",o),t.videoPath=o.data}),t.videoStatus=1):t.videoStatus=1},closeVideo:function(){var t=this;1==t.videoStatus?t.videoStatus=2:t.videoStatus=1},getPintuanhome:function(){var t=this;this.$http.post("pintuan/pintuan_home",{limit:10,pages:0,goods_id:t.options.goods_id}).then(function(o){console.log("往期拼团记录",o.data),t.pintuanHomeData=o.data})},onGotUserInfo:function(o){var e=this;console.log("getuserinfo===",o),o.detail.userInfo&&(t.setStorageSync("userInfo",o.detail.userInfo),this.upUserInfo(o.detail),"buybtn"==o.currentTarget.dataset.btntype&&(!e.goodsRow.specs.specs1&&!e.goodsRow.specs.specs2||e.goods_sku_id>=1)?t.navigateTo({url:o.currentTarget.dataset.url}):(console.log("显示规格窗口"),e.animagg2=!0))},goback:function(){t.navigateBack({})},jumpTo:function(t){var o=this,e=t.currentTarget.dataset.jumptype,s=t.currentTarget.dataset.url,n=t.currentTarget.dataset.closepage;console.log("sku_id",o.goods_sku_id),console.log("specs",o.goodsRow.specs.specs1),console.log("specs",o.goodsRow.specs.specs2),console.log("btntype",t.currentTarget.dataset.btntype),"buybtn"==t.currentTarget.dataset.btntype&&(!o.goodsRow.specs.specs1&&!o.goodsRow.specs.specs2||o.goods_sku_id>=1&&1==o.animagg2)?this.jumpFunction(e,s,n):"jumpto"==t.currentTarget.dataset.btntype?this.jumpFunction(e,s,n):(console.log("显示规格窗口"),o.animagg2=!0)},setCountDown:function(){var t=this,o=1e3,e=this.goodsRow.pintuan_list,s=e.map(function(e,s){e.times<=0&&(e.times=0),e.times=e.times*o;var n=t.getFormat(e.times);return e.times-=o,e.times=e.times/o,e.countDown="".concat(n.hh,":").concat(n.mm,":").concat(n.ss),e});this.goodsRow.pintuan_list=s,1==this.stoptimedown&&setTimeout(this.setCountDown,o)}}};o.default=e}).call(this,e("543d")["default"])}},[["7433","common/runtime","common/vendor"]]]);