(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/jiesuan/jiesuan"],{"3d1a":function(t,s,e){"use strict";e.r(s);var n=e("45ef"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(s,t,function(){return n[t]})}(o);s["default"]=a.a},"45ef":function(t,s,e){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var e={data:function(){return{address:0,addressdata:"",goodsRow:"",tkstatus:!1,tiaokuanstatus:2,options:"",userinfo:"",specs:"",specs_index1:null,specs_index2:null,specs1:"",specs2:"",goods_sku_id:0,animagg2:!1}},onLoad:function(s){var e=this;e.tkstatus=!!t.getStorageSync("tkstatus")&&t.getStorageSync("tkstatus"),s.goods_id?(e.userinfo=t.getStorageSync("userinfo")?t.getStorageSync("userinfo"):t.getStorageSync("userInfo")?t.getStorageSync("userInfo"):"",e.options=s,e.specs_index1=s.specs_index1,e.specs_index2=s.specs_index2,e.goods_sku_id=s.sku_id,this.$http.post("goods/specs",{goods_id:s.goods_id}).then(function(t){e.specs=t.data.specs,s.skuname?(e.specs1=s.specs1,e.specs2=s.specs2):(e.specs1=t.data.specs.specs1[s.specs_index1].id,e.specs2=t.data.specs.specs2[s.specs_index2].id)})):t.showModal({title:"温馨提示",content:"缺少关键参数",showCancel:!1,success:function(){t.navigateBack({})}})},onShow:function(){var s=this,e=t.getStorageSync("address_id");e?s.$http.post("address/getAddress",{address_id:e}).then(function(t){console.log("获取收货地址"),console.log(t),""!=t.data&&(s.addressdata=t.data,s.address=1)}):s.$http.post("address/getMorenAddress").then(function(e){e.data&&(t.setStorageSync("address_id",e.data.id),s.addressdata=e.data,s.address=1)})},onReady:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},methods:{tiaokuanalert:function(t){var s=this;1==s.tiaokuanstatus?s.tiaokuanstatus=2:s.tiaokuanstatus=1},tiaokuan:function(s){var e=this;0==e.tkstatus?e.tkstatus=!0:e.tkstatus=!1,t.setStorageSync("tkstatus",e.tkstatus),console.log(e.tkstatus)},pay:function(s){var e=this;if(s.detail.userInfo&&(t.setStorageSync("userInfo",s.detail.userInfo),e.userinfo=s.detail.userInfo,this.upUserInfo(s.detail)),""==e.userinfo)return t.showModal({title:"温馨提示",content:"请授权后进行付款",showCancel:!1,success:function(){}}),!1;if(console.log("可以进行付款"),0!=e.tkstatus){var n=t.getStorageSync("address_id");if(n){if("pin"==e.options.buytype)var a=null;else a=e.options.pintuan_home_id;this.$http.post("pintuan/createteam",{id:e.options.goods_id,address_id:n,pintuan_home_id:a,sku_id:!!e.goods_sku_id&&e.goods_sku_id}).then(function(s){if(console.log("开团",s),0!=s.code){var e=s.data.new_res,n=s.data.pintuan_orders_id,a=s.data.hb_status;t.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(s){console.log("支付接口"),console.log(s),"yes"==a?setTimeout(function(){t.redirectTo({url:"/pages/redbag/redbag?pintuan_orders_id="+n})},1e3):setTimeout(function(){t.redirectTo({url:"/pages/payment/payment?pintuan_orders_id="+n})},1e3)},fail:function(){}})}})}else t.showToast({title:"请选择收货地址"})}else t.showModal({title:"温馨提示",content:"请阅读《拼团夺宝商品购买条款》后进行购买",showCancel:!1,success:function(t){}})},jumpTo:function(t){var s=t.currentTarget.dataset.jumptype,e=t.currentTarget.dataset.url,n=t.currentTarget.dataset.closepage;this.jumpFunction(s,e,n)},get_data:function(){var t=this;this.$http.post("goods/show",{id:t.options.goods_id}).then(function(s){console.log("获取订单商品信息",s),t.goodsRow=s.data})},alertdonghuaout:function(t){var s=this;s.animagg2=!0},alert_donghua_hide:function(t){var s=this;s.animagg2=!1},changeguige:function(t){var s=this,e=t.currentTarget.dataset.scrollid,n=t.currentTarget.dataset.id,a=(t.currentTarget.dataset.group_id,t.currentTarget.dataset.index);s.specs1=n,s.specs_index1=a,s.specs_index2=null,s.specs2=0,s.scrollkey=e,s.judgeGoodsNum()},changeguige2:function(t){var s=this,e=t.currentTarget.dataset.scrollid,n=t.currentTarget.dataset.id,a=(t.currentTarget.dataset.group_id,t.currentTarget.dataset.index);s.specs2=n,s.specs_index2=a,s.scrollkey=e,s.judgeGoodsNum()},judgeGoodsNum:function(){var t=this,s=t.options.goods_id,e=t.specs1,n=t.specs2?t.specs2:0;this.$http.post("judgeGoodsNum",{goods_id:s,specs1:e,specs2:n},{showLoading:!1}).then(function(s){console.log(s.data.id),t.goods_sku_id=s.data.id?s.data.id:0})}}};s.default=e}).call(this,e("543d")["default"])},"62d2":function(t,s,e){"use strict";var n=function(){var t=this,s=t.$createElement;t._self._c},a=[];e.d(s,"a",function(){return n}),e.d(s,"b",function(){return a})},c65c:function(t,s,e){},ed0d:function(t,s,e){"use strict";(function(t){e("d81e"),e("921b");n(e("66fd"));var s=n(e("fdf6"));function n(t){return t&&t.__esModule?t:{default:t}}t(s.default)}).call(this,e("543d")["createPage"])},f43f:function(t,s,e){"use strict";var n=e("c65c"),a=e.n(n);a.a},fdf6:function(t,s,e){"use strict";e.r(s);var n=e("62d2"),a=e("3d1a");for(var o in a)"default"!==o&&function(t){e.d(s,t,function(){return a[t]})}(o);e("f43f");var d=e("2877"),i=Object(d["a"])(a["default"],n["a"],n["b"],!1,null,null,null);s["default"]=i.exports}},[["ed0d","common/runtime","common/vendor"]]]);